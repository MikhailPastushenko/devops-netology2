
## Домашнее задание к занятию 6.4 PostgreSQL ##

### Задача 1 ###

#### Используя docker поднимите инстанс PostgreSQL (версию 13). Данные БД сохраните в volume. ####

![img_1.png](img_1.png)

#### Подключитесь к БД PostgreSQL используя psql. ####
#### Воспользуйтесь командой \\? для вывода подсказки по имеющимся в psql управляющим командам. ####

![img_2.png](img_2.png)

#### Найдите и приведите управляющие команды для: #### 

#### - вывода списка БД ####

![img_3.png](img_3.png)

#### - подключения к БД ####

![img_4.png](img_4.png)

#### - вывода списка таблиц ####

![img_5.png](img_5.png)

#### - вывода описания содержимого таблиц ####

![img_6.png](img_6.png)

#### - выхода из psql ####

![img_7.png](img_7.png)

### Задача 2 ###

#### Используя psql создайте БД test_database ####
#### Изучите бэкап БД. ####
#### Восстановите бэкап БД в test_database ####

![img_8.png](img_8.png)

#### Перейдите в управляющую консоль psql внутри контейнера. ####
#### Подключитесь к восстановленной БД и проведите операцию ANALYZE для сбора статистики по таблице. ####

![img_9.png](img_9.png)

#### Используя таблицу pg_stats, найдите столбец таблицы orders с наибольшим средним значением размера элементов в байтах. ####
#### Приведите в ответе команду, которую вы использовали для вычисления и полученный результат. ####

![img_10.png](img_10.png)

### Задача 3 ###

##### Архитектор и администратор БД выяснили, что ваша таблица orders разрослась до невиданных размеров и поиск по ней занимает долгое время. Вам, как успешному выпускнику курсов DevOps в нетологии предложили провести разбиение таблицы на 2 (шардировать на orders_1 - price>499 и orders_2 - price<=499). ####
#### Предложите SQL-транзакцию для проведения данной операции. ####

![img_11.png](img_11.png)

#### Можно ли было изначально исключить "ручное" разбиение при проектировании таблицы orders? ####

Да, можно было при проектировании задать шардирование для таблицы orders , аналогично тому как это сделано для таблицы orders_new на вышеуказанном скриншоте.

### Задача 4 ###

#### Используя утилиту pg_dump создайте бекап БД test_database. ####
#### Как бы вы доработали бэкап-файл, чтобы добавить уникальность значения столбца title для таблиц test_database? ####

Необходимо добавить условие UNIQUE к описанию поля title (подсвеченная строка на скриншоте) 

![img_12.png](img_12.png)

